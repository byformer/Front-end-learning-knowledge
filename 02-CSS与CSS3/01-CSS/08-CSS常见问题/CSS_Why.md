# CSS Why — 疑难解答

## 1、Why CSS

> 结构与样式彻底分离

## 2、Why 选择器

> 先选中元素，才能进一步折腾

## 3、Why 层叠

> 权重计算，处理冲突的能力

## 4、Why 解析顺序

> 为什么 CSS 选择器的解析顺序是从右到左呢？因为更快
>
> 正向解析是在试错，而逆向匹配则是在挑选正确的元素。因为匹配的情况远远低于不匹配的情况，所以逆向匹配带来的优势是巨大的

## 5、Why Hack

> CSS Hack 是实现浏览器样式兼容的兜底办法，**能不用就尽量不要使用**。但是，针对一些浏览器的 bug，比如老版本 IE 的 bug，有时使用 CSS Hack 是不得已而为之的做法

## 6、Why 伪类和伪元素

> 为了丰富元素的样式表现

## 7、Why 盒模型

> CSS3 新增了一个盒模型属性 box-sizing，能够事先定义盒模型的尺寸解析方式

## 8、Why margin 重叠

> 在网页布局中，因为 margin 重叠的原因，我们常常把 margin 作为一个“问题样式”而尽量少地使用它
>
> 但要善用重叠，可以在列表项中同时使用 margin-top 和 margin-bottom。这样，使页面结构更具有健壮性，最后一个元素移除或位置调换，都不会破坏原生的布局

## 9、Why auto

### 为什么块级元素的宽度默认撑满父级元素？

因为块级元素 width 默认值为 auto，而 margin、border 和 padding 默认值都为 0，依据块级元素框的水平总和等于父元素的 width 的计算公式，块级元素的宽度 width 默认等于包含块也就是父元素的宽度 width

### 为什么块级元素设置宽度后，默认居左显示？

这种情况，叫做格式化属性过分受限(overconstrained)，此时总会把 margin-right 强制为 auto，从而使居左显示，margin-right 来补足剩余的宽度

### 为什么固定宽度的块级元素设置 margin:auto 可以实现水平居中显示?

同样依据块级元素框的水平总和等于父元素的 width 的计算公式，border、padding 为 0，设置固定宽度后，margin-left 和 margin-right 平分剩余的宽度

### 为什么块级元素的高度默认为元素自身高度?

个人认为，这与浏览器先从左到右，再从上到下的渲染机制有关。这种渲染机制决定了宽度值是确定的，高度值是元素自身高度。如果高度值也是确定的，即视口高度，则每渲染一个块级元素，就要占满整个屏幕大小，无疑是一个灾难；所以，浏览器在保证足够宽的情况下，就需要尽量小的高度，这个尽量小的高度就是元素自身高度

### 为什么块级元素设置 margin:auto 无法实现垂直居中显示?

浏览器对于 margin-top、margin-bottom 为 auto 时，会自动将其重置为 0。如果要实现垂直居中，可以利用 calc()自己计算，如果 height 为 100px，border 为 0，padding 为 10px，包含块的高度为 200px，则 margin-top = calc((200px - 100px - 10px -10px) / 2)

> [注意]要考虑垂直方向上的 margin 重叠问题

### 为什么图片设置 margin:auto 不可以实现水平居中显示？

图片无法水平居中，类似于块级元素无法垂直居中。因为图片的宽度 width 默认是自身宽度，左右 margin 设置为 auto，会被重置为 0；如果要实现水平居中显示，把图片 display 设置为 block 即可

## 10、Why 行高和垂直对齐

> 定义：line-height 行高是指文本行基线之间的距离。vertical-align 用来设置垂直对齐方式，所有垂直对齐的元素都会影响行高

### 为什么 inline-block 元素会存在底部空隙？

inline-block 元素在块级元素中留空隙是因为图像的默认垂直对齐方式是基线对齐(基线对齐在原理上相当于图像底边与匿名文本大写英文字母 X 的底边对齐)；而匿名文本是有行高的，继承父级元素设置的行高，默认为 normal(chrome 下为 font-size 的 1.334 倍)，所以 X 的底边距离行框的底边有一段距离，这段距离就是图像留出的空隙

- 解决方案

  1. 设置 display:block，因为垂直对齐方式只能作用于替换元素和行内元素，更改为块级元素，会使垂直对齐方式失效
  2. 设置父级的 line-height: 0，这样使匿名文本与行框的距离为 0
  3. 设置 vertical-align 为 top/middle/bottom

### 为什么行内元素垂直 margin 无效

因为行内元素垂直布局主要是通过行高 line-height 和垂直对齐 vertical-align 来影响的，垂直 margin 并不会影响它们，所以不会影响垂直布局。而在显示方式，margin 区域不会显示元素背景，所以也不会影响自身元素的显示，所以行内元素垂直 margin 无效

## 11、Why 内容溢出

> 当一个元素固定为某个特定大小，但内容在元素中放不下。此时可以利用溢出 overflow 来控制这种情况
>
> 滚动条和 overflow 是紧密相关的。只有当父级的 overflow 的值是 auto 或 scroll，并且元素的内容超出元素区域时，才有可能出现滚动条。chrome/firefox/IE 浏览器的默认滚动条宽度是 17px，safari 浏览器则是 21px
